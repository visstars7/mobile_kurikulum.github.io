<!DOCTYPE HTML>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport"
        content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, viewport-fit=cover" />
    <title>Azures Mobile</title>
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Poppins:200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i|Roboto:300,300i,400,400i,500,500i,700,700i,900,900i&display=swap">
    <link rel="stylesheet" type="text/css" href="../styles/style.css">
    <link rel="stylesheet" type="text/css" href="../styles/framework.css">
    <link rel="stylesheet" type="text/css" href="../fonts/css/fontawesome-all.min.css">
    <link rel="apple-touch-icon" sizes="180x180" href="app/icons/icon-192x192.png">
    <script type="text/javascript" src="../scripts/jquery.js"></script>
    <!-- jQuery Modal -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js"></script>
</head>

<body class="theme-light" data-highlight="blue2">

    <!-- Modal HTML embedded directly into document -->
    <div id="modal" class="modal" style="z-index: 999!important;">
        <form id="form">

        </form>
    </div>

    <!-- status input-->
    <input type="hidden" id="status" name="status">

    <!-- jenis input-->

    <div id="page">
        <input type="hidden" id="jenis" name="jenis">

        <div id="page-preloader">
            <div class="loader-main">
                <div class="preload-spinner border-highlight"></div>
            </div>
        </div>

        <div class="header header-fixed header-logo-app header-auto-show">
            <a href="index.html" class="header-title">KURIKULUM</a>
            <a href="#" data-menu="menu-main" class="header-icon header-icon-1"><i class="fas fa-bars"></i></a>
            <a href="#" data-toggle-theme class="header-icon header-icon-2"><i class="fas fa-lightbulb"></i></a>
            <a href="#" data-menu="menu-highlights" class="header-icon header-icon-3"><i class="fas fa-brush"></i></a>
        </div>


        <div class="page-content" style="z-index: 0;">
            <div style="padding: 20px;">
                <video id="preview" autoplay="autoplay" class="active"
                    style="transform: scaleX(-1);width: 100%;border-radius: 10px;"></video>
            </div>
            <div class="one-half top-50">
                <a href="#" onclick="onValue(1)"
                    class="left-15 button button-xs round-small shadow-large bg-blue2-dark button-full bottom-30"><i
                        class="fa fa-paper-plane right-10"></i>Masuk</a>
            </div>
            <div class="one-half last-column top-50">
                <a href="#" onclick="onValue(2)"
                    class="right-15 button button-xs round-small shadow-large button-border button-full border-blue2-dark bg-red2-dark color-theme bg-transparent bottom-0"><i
                        class="fa fa-sign-out mr-10"></i>Keluar</a>
            </div>
            <div class="one" id="btn-data-siswa"></div>
        </div>
        <!-- Footer Menu-->
        <div style="z-index: 0;" id="footer-menu" class="footer-menu-5-icons footer-menu-style-1">
            <a href="#">
                <i class="fas fa-university" aria-hidden="true" data-feather-bg="blue2-fade-dark"></i>
                <span>RPP/SILABUS</span>
                <strong></strong></a>
            <a onclick="backHome()">
                <i class="fas fa-user-alt" aria-hidden="true" data-feather-bg="blue2-fade-dark"></i>
                <span>My Profile</span>
                <strong></strong></a>
            <a href="#" class="active-nav4">
                <i class="fa fa-qrcode" aria-hidden="true" data-feather-bg="blue2-fade-dark"></i>
                <span>Absensi Kelas</span>
                <strong></strong></a>

            <a href="#">
                <i class="fas fa-calendar-alt" aria-hidden="true" data-feather-bg="blue2-fade-dark"></i>
                <span>Penjadwalan</span>
                <strong></strong></a>
            <a href="#">
                <i class="fas fa-stream" aria-hidden="true" data-feather-bg="blue2-fade-dark"></i>
                <span>More Menu</span>
                <strong></strong></a>
        </div>

        <!-- Main Sidebar Menu-->
        <div id="menu-main" class="menu menu-box-right menu-box-detached round-medium" data-menu-active="nav-welcome"
            data-menu-width="260" data-menu-effect="menu-over" data-menu-load="menu-main.html">
        </div>

        <!-- Share Menu-->
        <div id="menu-share" class="menu menu-box-bottom menu-box-detached round-medium" data-menu-height="400"
            data-menu-effect="menu-over" data-menu-load="menu-share.html">
        </div>

        <!-- Color Highlights Menu-->
        <div id="menu-highlights" class="menu menu-box-bottom menu-box-detached round-medium" data-menu-height="480"
            data-menu-effect="menu-over" data-menu-load="menu-colors.html">
        </div>


        <!-- Be sure this is on your main visiting page, for example, the index.html page-->
        <!-- These modals will asure your page fires the PWA install notification boxes-->
        <!-- Install Prompt for Android -->
        <div id="menu-install-pwa-android" class="menu menu-box-bottom menu-box-detached round-large"
            data-menu-height="340" data-menu-effect="menu-parallax">
            <div class="boxed-text-huge top-25">
                <img class="round-medium preload-image center-horizontal" data-src="app/icons/icon-128x128.png"
                    alt="img" width="90">
                <h4 class="center-text bolder top-20 bottom-10">Add Azures on your Home Screen</h4>
                <p>
                    Install Azures on your home screen, and access it just like a regular app. It really is that simple!
                </p>
                <a href="#"
                    class="pwa-install button button-xs button-round-medium button-center-large shadow-large bg-highlight bottom-0">Add
                    to Home Screen</a><br>
                <a href="#"
                    class="pwa-dismiss close-menu center-text color-gray2-light uppercase ultrabold opacity-60 under-heading font-10">Maybe
                    later</a>
                <div class="clear"></div>
            </div>
        </div>

        <!-- Install instructions for iOS -->
        <div id="menu-install-pwa-ios" class="menu menu-box-bottom menu-box-detached round-large" data-menu-height="320"
            data-menu-effect="menu-parallax">
            <div class="boxed-text-huge top-25">
                <img class="round-medium preload-image center-horizontal" data-src="app/icons/icon-128x128.png"
                    alt="img" width="90">
                <h4 class="center-text bolder top-20 bottom-10">Add Azures on your Home Screen</h4>
                <p class="bottom-15">
                    Install Azures on your home screen, and access it just like a regular app. Open your Safari menu and
                    tap "Add to Home Screen".
                </p>
                <div class="clear"></div>
                <a href="#"
                    class="pwa-dismiss close-menu center-text color-highlight uppercase ultrabold opacity-80 top-25">Maybe
                    later</a>
                <i class="fa-ios-arrow fa fa-caret-down font-40"></i>
            </div>
        </div>
        <div class="menu-hider"></div>
    </div>
    <script type="text/javascript" src="../scripts/uri.js"></script>
    <script type="text/javascript" src="../scripts/apiServices.js"></script>
    <script type="text/javascript" src="../scripts/instascan.min.js"></script>
    <script type="text/javascript" src="../scripts/plugins.js"></script>
    <script type="text/javascript" src="../scripts/custom.js"></script>
    <script type="text/javascript" src="../scripts/absensi.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>

    <script type="text/javascript">
        // check apakah checkbox tercentang
        $(document).on('change', '.checkbox', function () {
            if (this.checked) {
                this.value = 1;
            }
        });


        if (localStorage.getItem('data-siswa')) {
            $("#btn-data-siswa").html(
                `<div id="btn-data-siswa" style="margin-top: 120px;margin-left:20px;margin-right: 20px;"><a href="#" onclick="onSiswa()" class="button button-xs round-small shadow-large button-border button-full border-green2-dark bg-green2-dark color-theme bg-transparent bottom-0"><i class="fa fa-sign-out mr-10"></i>Absensi Siswa</a></div>`
            );
        } else {
            localStorage.removeItem('data-siswa');
        }

        let scanner = new Instascan.Scanner({
            video: document.getElementById('preview')
        });

        scanner.addListener('scan', function (content) {
            try {
                var id_ruang = atob(atob(atob(atob(atob(atob(content))))));
                _storeAbsensiGuru(id_ruang);
            } catch {
                console.error();
                swal.fire({
                    title: 'Error',
                    text: 'Error scanning',
                    icon: 'error'
                });
            }

        });
        Instascan.Camera.getCameras().then(function (cameras) {
            if (cameras.length > 0) {
                if (cameras.length > 1) {
                    // kamera belakang
                    scanner.start(cameras[1]);
                } else {
                    // kamera depan
                    scanner.start(cameras[0]);
                }
            } else {
                swal.fire({
                    title: 'Warning',
                    text: 'Camera not found',
                    icon: 'warning'
                });
            }
        }).catch(function (e) {
            console.error(e);
        });

        function backHome() {
            location.href = BASE_URL('pages/guru/home.html');
        }
    </script>
</body>